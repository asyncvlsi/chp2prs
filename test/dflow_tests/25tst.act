import "25.act";
import "25_df_chp.act";

defproc test()
{
  chan(int) X;
  chan(int) Y;
  
  df_testproc d(X,Y);

  int a, b, c;
  int i;
  bool success;

  chp {
      i := 0;
      success+;
   *[  i < 10 ->
    X!15,Y?a;
    log ("step 1");
    X!18,Y?b;
    log ("step 2");
    X!13,Y?c;
    log ("step 3");
    [ a = 5 & b = 10 & c = 33 -> skip [] else -> success-; log ("FAILURE: ", a, " b=", b, " c=", c) ];
    i := i + 1
    ];
    [ success -> log ("SUCCESS") [] else -> skip ]
  }
}
