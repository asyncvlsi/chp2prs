
defproc add (chan?(int<4>) l1, l2; chan!(int<4>) r)
{
	int<4> x1, x2;
	chp{
		*[l1?x1;l2?x2;r!(x1+x2)]
	}
}

defproc src (chan!(int<4>) r)
{
	chp{
		*[r!5]
	}
}

defproc snk (chan?(int<4>) l)
{
	int<4> x;
	chp{
		*[l?x; log("%d", x)]
	}
}

defproc testproc (chan?(int<4>) X1, X2; chan!(int<4>) Y)
{
  add a(X1,X2,Y);
  src i1(X1);
  src i2(X2);
  snk o (Y);
}
